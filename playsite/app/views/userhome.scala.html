@(globalData : controllers.Application.GlobalData, user : controllers.Application.UserData, roles : List[controllers.Application.UserRole], flash: Flash)

@main("Home page for: " + user.name, globalData, Some(user), flash) {
    <h1>Home page for: @user.name</h1>
    
    <h2>Contact details</h2>
    @if( user.email == None) {
        <div>
            <p>Please enter your email address to complete registration with the site.</p>
            
            <form action=@routes.Application.addEmail.toString>
                <p>Email: <input type="text" name="email"/> <input type="submit" value="Submit"/> </p>
            </form>
        </div>
    } else {    
        <p>Your registered email address: @user.email.get</p>
    }
    </br>
   
    <h2>Roles</h2>
    
    <table>
    <tr><th>Institution</th><th>Department</th><th>Location</th><th>Stack overflow tags</th><th>Institution sector tags</th><th>Actions</th></tr>
    @roles.map( r => {
        <tr>
            <td>
            	<a href={"http://" + r.url}>{r.institutionName}</a>
            </td>
            <td>
                {r.department}
            </td>
            <td>{r.location}</td>
            <td>
                <ul class="token-input-list-facebook">
                {
                    r.soTags.map( tag => <li class="token-input-token-facebook"><p>{tag}</p></li> )
                }
                </ul>
            </td>
            <td>
                <ul class="token-input-list-facebook">
                {
                    r.sectorTags.map( tag => <li class="token-input-token-facebook"><p>{tag}</p></li> )
                }
                </ul>
            </td>
            <td>
                <a href={routes.Application.deleteUserRole(r.id).toString}>delete</a>
                <!--<a href={routes.Application.editUserRole(r.id).toString}>edit</a>-->
            </td>
        </tr>
    } )
    </table>

    <a href="/refineUser">Add new role</a>

    <br/>

    <a href="/">Home</a>
}
